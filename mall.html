<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shree Mall</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .mall-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .mall-header h1 {
            margin: 0;
            font-size: 2.5em;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .mall-header p {
            margin: 10px 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 20px;
        }

        .products {
            flex: 2;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .cart {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: sticky;
            top: 20px;
            height: fit-content;
            display: flex;
            flex-direction: column;
        }

        .product-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }

        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px;
        }

        .product-card h3 {
            margin: 10px 0;
            color: #333;
        }

        .product-card .price {
            color: #e44d26;
            font-weight: bold;
            font-size: 1.2em;
            margin: 10px 0;
        }

        .add-to-cart {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            font-size: 1em;
        }

        .add-to-cart:hover {
            background: #45a049;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .cart-total {
            margin-top: 20px;
            font-weight: bold;
            text-align: right;
            padding-top: 15px;
            border-top: 2px solid #eee;
        }

        .remove-btn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
        }

        .remove-btn:hover {
            background: #cc0000;
        }

        .billing-section {
            margin-top: 30px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .billing-section h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .bill-details {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
        }

        .bill-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .bill-row:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 1.2em;
            color: #e44d26;
            padding-top: 15px;
        }

        .checkout-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            font-size: 1.1em;
            margin-top: 20px;
        }

        .checkout-btn:hover {
            background: #45a049;
        }

        .checkout-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .category-filters {
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .category-btn {
            background: #f0f0f0;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .category-btn:hover {
            background: #e0e0e0;
        }

        .category-btn.active {
            background: #4CAF50;
            color: white;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.5);
            color: white;
            text-align: center;
            padding: 10px;
            display: none;
        }

        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            display: none;
        }

        /* Game Area Styles */
        .game-area {
            margin-top: 30px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .game-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        .game-tab {
            background: #f0f0f0;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
            transition: all 0.3s ease;
        }

        .game-tab.active {
            background: #4CAF50;
            color: white;
        }

        .game-content {
            display: none;
        }

        .game-content.active {
            display: block;
        }

        /* Memory Game Styles */
        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 400px;
            margin: 0 auto;
        }

        .memory-card {
            width: 80px;
            height: 80px;
            background: #2196F3;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            transition: all 0.3s ease;
        }

        .memory-card.flipped {
            background: #4CAF50;
            transform: rotateY(180deg);
        }

        .memory-card.matched {
            background: #FF9800;
            cursor: default;
        }

        /* Snake Game Styles */
        .snake-game {
            text-align: center;
        }

        #snakeCanvas {
            border: 2px solid #333;
            background: #f0f0f0;
            margin: 10px auto;
            display: block;
        }

        .game-controls {
            margin: 10px 0;
        }

        .game-controls button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 5px;
        }

        .game-controls button:hover {
            background: #45a049;
        }

        .game-score {
            font-size: 1.2em;
            font-weight: bold;
            margin: 10px 0;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="mall-header">
        <h1>Shree Mall</h1>
        <p>Your One-Stop Shopping Destination</p>
    </div>
    <div class="container">
        <div class="products" id="products">
            <!-- Products will be added here dynamically -->
        </div>
        <div class="cart">
            <h2>Shopping Cart</h2>
            <div id="cart-items">
                <!-- Cart items will be added here -->
            </div>
            <div class="cart-total">
                Total: $<span id="cart-total">0.00</span>
            </div>
        </div>
    </div>

    <div class="billing-section" id="billing-section" style="display: none;">
        <h2>Billing Details</h2>
        <div class="bill-details">
            <div class="bill-row">
                <span>Subtotal:</span>
                <span id="bill-subtotal">$0.00</span>
            </div>
            <div class="bill-row">
                <span>Tax (8%):</span>
                <span id="bill-tax">$0.00</span>
            </div>
            <div class="bill-row">
                <span>Total Amount:</span>
                <span id="bill-total">$0.00</span>
            </div>
        </div>
        <button class="checkout-btn" id="checkout-btn" disabled>Proceed to Checkout</button>
    </div>

    <div class="game-area">
        <h2>ðŸŽ® Play While You Shop!</h2>
        <div class="game-tabs">
            <button class="game-tab active" onclick="switchGame('memory')">Memory Game</button>
            <button class="game-tab" onclick="switchGame('snake')">Snake Game</button>
        </div>
        
        <div class="game-content active" id="memory-game">
            <div class="game-score">Score: <span id="memory-score">0</span></div>
            <div class="memory-game" id="memory-board">
                <!-- Memory cards will be generated here -->
            </div>
            <div class="game-controls">
                <button onclick="resetMemoryGame()">New Game</button>
            </div>
        </div>
        
        <div class="game-content" id="snake-game">
            <div class="game-score">Score: <span id="snake-score">0</span></div>
            <canvas id="snakeCanvas" width="400" height="400"></canvas>
            <div class="game-controls">
                <button onclick="startSnakeGame()">Start Game</button>
                <button onclick="pauseSnakeGame()">Pause</button>
                <button onclick="resetSnakeGame()">Reset</button>
            </div>
            <p>Use arrow keys to control the snake!</p>
        </div>
    </div>

    <div class="loading" id="loading">Loading...</div>
    <div class="error-message" id="error-message"></div>

    <script>
        const products = [
            // Toys for Children
            {
                id: 25,
                name: "LEGO Building Blocks Set",
                price: 29.99,
                image: "https://via.placeholder.com/200x200?text=LEGO+Blocks"
            },
            {
                id: 26,
                name: "Barbie Doll Collection",
                price: 19.99,
                image: "https://via.placeholder.com/200x200?text=Barbie+Doll"
            },
            {
                id: 27,
                name: "Remote Control Car",
                price: 34.99,
                image: "https://via.placeholder.com/200x200?text=RC+Car"
            },
            {
                id: 28,
                name: "Educational Puzzle Set",
                price: 15.99,
                image: "https://via.placeholder.com/200x200?text=Puzzle+Set"
            },
            {
                id: 29,
                name: "Plush Teddy Bear",
                price: 12.99,
                image: "https://via.placeholder.com/200x200?text=Teddy+Bear"
            },
            {
                id: 30,
                name: "Art & Craft Kit",
                price: 24.99,
                image: "https://via.placeholder.com/200x200?text=Art+Kit"
            },
            {
                id: 31,
                name: "Board Game - Monopoly",
                price: 22.99,
                image: "https://via.placeholder.com/200x200?text=Monopoly"
            },
            {
                id: 32,
                name: "Science Experiment Kit",
                price: 39.99,
                image: "https://via.placeholder.com/200x200?text=Science+Kit"
            },
            {
                id: 33,
                name: "Musical Instruments Set",
                price: 18.99,
                image: "https://via.placeholder.com/200x200?text=Music+Set"
            },
            {
                id: 34,
                name: "Action Figure Collection",
                price: 16.99,
                image: "https://via.placeholder.com/200x200?text=Action+Figure"
            },
            {
                id: 35,
                name: "Building Train Set",
                price: 45.99,
                image: "https://via.placeholder.com/200x200?text=Train+Set"
            },
            {
                id: 36,
                name: "Kids Smart Watch",
                price: 59.99,
                image: "https://via.placeholder.com/200x200?text=Smart+Watch"
            },
            // Sports Shoes
            {
                id: 13,
                name: "Nike Running Shoes",
                price: 89.99,
                image: "https://via.placeholder.com/200x200?text=Nike+Shoes"
            },
            {
                id: 14,
                name: "Adidas Sports Shoes",
                price: 79.99,
                image: "https://via.placeholder.com/200x200?text=Adidas+Shoes"
            },
            {
                id: 15,
                name: "Puma Training Shoes",
                price: 69.99,
                image: "https://via.placeholder.com/200x200?text=Puma+Shoes"
            },
            // Sports Shirts
            {
                id: 16,
                name: "Nike Dri-Fit T-Shirt",
                price: 29.99,
                image: "https://via.placeholder.com/200x200?text=Nike+Shirt"
            },
            {
                id: 17,
                name: "Adidas Sports Jersey",
                price: 34.99,
                image: "https://via.placeholder.com/200x200?text=Adidas+Jersey"
            },
            {
                id: 18,
                name: "Under Armour Training Shirt",
                price: 39.99,
                image: "https://via.placeholder.com/200x200?text=UA+Shirt"
            },
            // Sports Shorts
            {
                id: 19,
                name: "Nike Running Shorts",
                price: 24.99,
                image: "https://via.placeholder.com/200x200?text=Nike+Shorts"
            },
            {
                id: 20,
                name: "Adidas Training Shorts",
                price: 22.99,
                image: "https://via.placeholder.com/200x200?text=Adidas+Shorts"
            },
            // Sports Accessories
            {
                id: 21,
                name: "Sports Water Bottle",
                price: 12.99,
                image: "https://via.placeholder.com/200x200?text=Water+Bottle"
            },
            {
                id: 22,
                name: "Yoga Mat",
                price: 19.99,
                image: "https://via.placeholder.com/200x200?text=Yoga+Mat"
            },
            {
                id: 23,
                name: "Sports Bag",
                price: 45.99,
                image: "https://via.placeholder.com/200x200?text=Sports+Bag"
            },
            {
                id: 24,
                name: "Jump Rope",
                price: 9.99,
                image: "https://via.placeholder.com/200x200?text=Jump+Rope"
            },
            // Original Products
            {
                id: 1,
                name: "Classic Hairband",
                price: 5.99,
                image: "https://via.placeholder.com/200x200?text=Hairband+1"
            },
            {
                id: 2,
                name: "Decorative Hairband",
                price: 8.99,
                image: "https://via.placeholder.com/200x200?text=Hairband+2"
            },
            {
                id: 3,
                name: "Sport Hairband",
                price: 6.99,
                image: "https://via.placeholder.com/200x200?text=Hairband+3"
            },
            {
                id: 4,
                name: "Luxury Hairband",
                price: 12.99,
                image: "https://via.placeholder.com/200x200?text=Hairband+4"
            },
            {
                id: 5,
                name: "Chocolate Cake",
                price: 24.99,
                image: "https://via.placeholder.com/200x200?text=Chocolate+Cake"
            },
            {
                id: 6,
                name: "Strawberry Cake",
                price: 26.99,
                image: "https://via.placeholder.com/200x200?text=Strawberry+Cake"
            },
            {
                id: 7,
                name: "Tiramisu",
                price: 8.99,
                image: "https://via.placeholder.com/200x200?text=Tiramisu"
            },
            {
                id: 8,
                name: "Cheesecake",
                price: 7.99,
                image: "https://via.placeholder.com/200x200?text=Cheesecake"
            },
            {
                id: 9,
                name: "Coca-Cola (6-pack)",
                price: 4.99,
                image: "https://via.placeholder.com/200x200?text=Coca-Cola"
            },
            {
                id: 10,
                name: "Diet Coke (6-pack)",
                price: 4.99,
                image: "https://via.placeholder.com/200x200?text=Diet+Coke"
            },
            {
                id: 11,
                name: "Vanilla Ice Cream",
                price: 5.99,
                image: "https://via.placeholder.com/200x200?text=Ice+Cream"
            },
            {
                id: 12,
                name: "Chocolate Brownie",
                price: 3.99,
                image: "https://via.placeholder.com/200x200?text=Brownie"
            }
        ];

        // Add category filtering
        const categories = {
            'All': products,
            'Toys': products.filter(p => ['LEGO', 'Barbie', 'Remote Control Car', 'Educational Puzzle', 'Teddy Bear', 'Art & Craft', 'Monopoly', 'Science Experiment', 'Musical Instruments', 'Action Figure', 'Train Set', 'Smart Watch'].some(item => p.name.includes(item))),
            'Sports Shoes': products.filter(p => p.name.toLowerCase().includes('shoes')),
            'Sports Shirts': products.filter(p => p.name.toLowerCase().includes('shirt') || p.name.toLowerCase().includes('jersey')),
            'Sports Shorts': products.filter(p => p.name.toLowerCase().includes('shorts')),
            'Sports Accessories': products.filter(p => ['Water Bottle', 'Yoga Mat', 'Sports Bag', 'Jump Rope'].some(item => p.name.includes(item))),
            'Hairbands': products.filter(p => p.name.toLowerCase().includes('hairband')),
            'Desserts': products.filter(p => ['Cake', 'Tiramisu', 'Cheesecake', 'Ice Cream', 'Brownie'].some(item => p.name.includes(item))),
            'Drinks': products.filter(p => p.name.toLowerCase().includes('coke'))
        };

        const MAX_QUANTITY = 10;
        let currentCategory = 'All';
        let cart = [];

        function displayProducts() {
            const productsDiv = document.getElementById('products');
            const filteredProducts = categories[currentCategory];
            
            // Add category filter buttons
            const filterButtons = `
                <div class="category-filters">
                    ${Object.keys(categories).map(category => `
                        <button class="category-btn ${category === currentCategory ? 'active' : ''}" 
                                onclick="filterCategory('${category}')">
                            ${category}
                        </button>
                    `).join('')}
                </div>
            `;

            productsDiv.innerHTML = filterButtons + filteredProducts.map(product => `
                <div class="product-card">
                    <img src="${product.image}" alt="${product.name}">
                    <h3>${product.name}</h3>
                    <div class="price">$${product.price.toFixed(2)}</div>
                    <button class="add-to-cart" onclick="addToCart(${product.id})">
                        Add to Cart
                    </button>
                </div>
            `).join('');
        }

        function showError(message) {
            const errorDiv = document.getElementById('error-message');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 3000);
        }

        function showLoading() {
            document.getElementById('loading').style.display = 'block';
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        async function filterCategory(category) {
            try {
                showLoading();
                currentCategory = category;
                await new Promise(resolve => setTimeout(resolve, 100)); // Simulate loading
                displayProducts();
            } catch (error) {
                showError('Error loading products. Please try again.');
            } finally {
                hideLoading();
            }
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                if (existingItem.quantity >= MAX_QUANTITY) {
                    showError(`Maximum quantity (${MAX_QUANTITY}) reached for ${product.name}`);
                    return;
                }
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...product,
                    quantity: 1
                });
            }

            updateCart();
        }

        function removeFromCart(productId) {
            const item = cart.find(item => item.id === productId);
            if (item && item.quantity > 1) {
                item.quantity -= 1;
            } else {
                cart = cart.filter(item => item.id !== productId);
            }
            updateCart();
        }

        function updateCart() {
            const cartItemsDiv = document.getElementById('cart-items');
            const cartTotalSpan = document.getElementById('cart-total');
            const billingSection = document.getElementById('billing-section');
            const checkoutBtn = document.getElementById('checkout-btn');

            try {
                cartItemsDiv.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <span>${item.name} x${item.quantity}</span>
                        <span>$${(item.price * item.quantity).toFixed(2)}</span>
                        <div>
                            <button class="remove-btn" onclick="removeFromCart(${item.id})">-</button>
                            <button class="add-to-cart" style="width: auto; margin: 0 5px;" 
                                    onclick="addToCart(${item.id})">+</button>
                        </div>
                    </div>
                `).join('');

                const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const tax = subtotal * 0.08;
                const total = subtotal + tax;

                cartTotalSpan.textContent = total.toFixed(2);

                if (cart.length > 0) {
                    billingSection.style.display = 'block';
                    document.getElementById('bill-subtotal').textContent = `$${subtotal.toFixed(2)}`;
                    document.getElementById('bill-tax').textContent = `$${tax.toFixed(2)}`;
                    document.getElementById('bill-total').textContent = `$${total.toFixed(2)}`;
                    checkoutBtn.disabled = false;
                } else {
                    billingSection.style.display = 'none';
                    checkoutBtn.disabled = true;
                }
            } catch (error) {
                showError('Error updating cart. Please try again.');
            }
        }

        // Add checkout functionality
        document.getElementById('checkout-btn').addEventListener('click', function() {
            if (cart.length > 0) {
                alert('Thank you for your purchase! Your order has been placed.');
                cart = [];
                updateCart();
            }
        });

        // Initialize the display
        displayProducts();

        // Game Variables
        let memoryCards = [];
        let flippedCards = [];
        let memoryScore = 0;
        let snakeGame = null;
        let snakeScore = 0;

        // Memory Game Functions
        function initializeMemoryGame() {
            const symbols = ['ðŸŽ®', 'ðŸŽ¯', 'ðŸŽ²', 'ðŸŽª', 'ðŸŽ¨', 'ðŸŽ­', 'ðŸŽª', 'ðŸŽ¯'];
            memoryCards = [...symbols, ...symbols].sort(() => Math.random() - 0.5);
            flippedCards = [];
            memoryScore = 0;
            updateMemoryScore();
            renderMemoryCards();
        }

        function renderMemoryCards() {
            const board = document.getElementById('memory-board');
            board.innerHTML = memoryCards.map((symbol, index) => `
                <div class="memory-card" onclick="flipCard(${index})" data-index="${index}">
                    ?
                </div>
            `).join('');
        }

        function flipCard(index) {
            const card = document.querySelector(`[data-index="${index}"]`);
            if (flippedCards.length === 2 || card.classList.contains('flipped') || card.classList.contains('matched')) {
                return;
            }

            card.textContent = memoryCards[index];
            card.classList.add('flipped');
            flippedCards.push({ index, symbol: memoryCards[index] });

            if (flippedCards.length === 2) {
                setTimeout(checkMatch, 1000);
            }
        }

        function checkMatch() {
            const [card1, card2] = flippedCards;
            const card1Element = document.querySelector(`[data-index="${card1.index}"]`);
            const card2Element = document.querySelector(`[data-index="${card2.index}"]`);

            if (card1.symbol === card2.symbol) {
                card1Element.classList.add('matched');
                card2Element.classList.add('matched');
                memoryScore += 10;
                updateMemoryScore();
                
                if (document.querySelectorAll('.matched').length === memoryCards.length) {
                    setTimeout(() => {
                        alert('Congratulations! You won! Score: ' + memoryScore);
                    }, 500);
                }
            } else {
                card1Element.textContent = '?';
                card2Element.textContent = '?';
                card1Element.classList.remove('flipped');
                card2Element.classList.remove('flipped');
            }
            flippedCards = [];
        }

        function updateMemoryScore() {
            document.getElementById('memory-score').textContent = memoryScore;
        }

        function resetMemoryGame() {
            initializeMemoryGame();
        }

        // Snake Game Functions
        class SnakeGame {
            constructor() {
                this.canvas = document.getElementById('snakeCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.gridSize = 20;
                this.snake = [{x: 10, y: 10}];
                this.food = this.generateFood();
                this.direction = 'right';
                this.gameLoop = null;
                this.isPaused = false;
                this.score = 0;
            }

            generateFood() {
                const x = Math.floor(Math.random() * (this.canvas.width / this.gridSize));
                const y = Math.floor(Math.random() * (this.canvas.height / this.gridSize));
                return {x, y};
            }

            draw() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Draw snake
                this.ctx.fillStyle = '#4CAF50';
                this.snake.forEach(segment => {
                    this.ctx.fillRect(segment.x * this.gridSize, segment.y * this.gridSize, this.gridSize - 2, this.gridSize - 2);
                });

                // Draw food
                this.ctx.fillStyle = '#FF5722';
                this.ctx.fillRect(this.food.x * this.gridSize, this.food.y * this.gridSize, this.gridSize - 2, this.gridSize - 2);
            }

            move() {
                const head = {...this.snake[0]};
                
                switch(this.direction) {
                    case 'up': head.y--; break;
                    case 'down': head.y++; break;
                    case 'left': head.x--; break;
                    case 'right': head.x++; break;
                }

                // Check collision with walls
                if (head.x < 0 || head.x >= this.canvas.width / this.gridSize || 
                    head.y < 0 || head.y >= this.canvas.height / this.gridSize) {
                    this.gameOver();
                    return;
                }

                // Check collision with self
                if (this.snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                    this.gameOver();
                    return;
                }

                this.snake.unshift(head);

                // Check if food is eaten
                if (head.x === this.food.x && head.y === this.food.y) {
                    this.food = this.generateFood();
                    this.score += 5;
                    this.updateScore();
                } else {
                    this.snake.pop();
                }
            }

            updateScore() {
                document.getElementById('snake-score').textContent = this.score;
            }

            gameOver() {
                clearInterval(this.gameLoop);
                alert(`Game Over! Score: ${this.score}`);
                this.reset();
            }

            reset() {
                this.snake = [{x: 10, y: 10}];
                this.food = this.generateFood();
                this.direction = 'right';
                this.score = 0;
                this.updateScore();
                this.isPaused = false;
            }

            start() {
                if (this.gameLoop) return;
                this.gameLoop = setInterval(() => {
                    if (!this.isPaused) {
                        this.move();
                        this.draw();
                    }
                }, 150);
            }

            pause() {
                this.isPaused = !this.isPaused;
            }
        }

        function startSnakeGame() {
            if (!snakeGame) {
                snakeGame = new SnakeGame();
            }
            snakeGame.start();
        }

        function pauseSnakeGame() {
            if (snakeGame) {
                snakeGame.pause();
            }
        }

        function resetSnakeGame() {
            if (snakeGame) {
                snakeGame.reset();
            }
        }

        // Game switching function
        function switchGame(gameType) {
            // Update tab styles
            document.querySelectorAll('.game-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.game-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(gameType + '-game').classList.add('active');

            // Initialize games when switched to
            if (gameType === 'memory') {
                if (memoryCards.length === 0) {
                    initializeMemoryGame();
                }
            }
        }

        // Keyboard controls for snake game
        document.addEventListener('keydown', (e) => {
            if (snakeGame && !snakeGame.isPaused) {
                switch(e.key) {
                    case 'ArrowUp':
                        if (snakeGame.direction !== 'down') snakeGame.direction = 'up';
                        break;
                    case 'ArrowDown':
                        if (snakeGame.direction !== 'up') snakeGame.direction = 'down';
                        break;
                    case 'ArrowLeft':
                        if (snakeGame.direction !== 'right') snakeGame.direction = 'left';
                        break;
                    case 'ArrowRight':
                        if (snakeGame.direction !== 'left') snakeGame.direction = 'right';
                        break;
                }
            }
        });

        // Initialize memory game on page load
        initializeMemoryGame();
    </script>
</body>
</html> 